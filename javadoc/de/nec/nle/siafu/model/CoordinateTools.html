<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_17) on Thu Mar 21 11:37:43 CET 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>CoordinateTools (Siafu Simulator 1.0.6-SNAPSHOT API)</title>
<meta name="date" content="2013-03-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CoordinateTools (Siafu Simulator 1.0.6-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CoordinateTools.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../de/nec/nle/siafu/model/BinaryOverlay.html" title="class in de.nec.nle.siafu.model"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../de/nec/nle/siafu/model/DirectorySimulationData.html" title="class in de.nec.nle.siafu.model"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?de/nec/nle/siafu/model/CoordinateTools.html" target="_top">Frames</a></li>
<li><a href="CoordinateTools.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">de.nec.nle.siafu.model</div>
<h2 title="Class CoordinateTools" class="title">Class CoordinateTools</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>de.nec.nle.siafu.model.CoordinateTools</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">CoordinateTools</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Siafu's concept of space is actually discrete. When you provide the map
 images in the simulation data, these are broken down into an array of
 pixels, and the rows and columns of those become the real positions used
 internally during the simulation.
 
 This is naturally not satisfactory for the purpose of location simulation,
 and so, the simulation data config file allows you to provide the
 coordinates that calibrate the map into a real world place. The Coordinate
 class is used to map the internal position used by Siafu into
 latitude/longitude pairs.
 
 The map is a rectangular portion of the world, not necessarily north
 oriented. To calibrate it, you provide the top right, bottom right and
 bottom left coordinates.
 
 Finding the right lat/long in our rectuangular map is a matter of
 coordinate rotation from (x,y) to (lat,lon) plus offsetting where:
 
 x = mapWitdhDegrees * j/w <br>
 y = mapHeightDegrees * (h-i)/h <br>
 
 where: <br>
 mapWitdth = sqrt( (brLat - blLat)^2 + (brLon - blLon)^2 ) <br>
 mapHeight = sqrt( (trLat - brLat)^2 + (trLon - brLon)^2 ) <br>
 
 Then: <br>
 lat = x*sin(A) + y*cos(A) + blLat <br>
 long = x*cos(A) - y*sin(A) + blLon <br>
 
 where A is the tilt angle of the map:
 
 A = arcos((brLong - blLong) / mapWidthDegrees)<br>
 
 To reverse the proces, and go from coordinates to a map row and column, you
 need to rotate the other way around, so:
 
 y = lon*sin(-A) + lat*cos(-A) - blLat = lon * (-sin(A)) +lat*cos(A) -
 (blLat*cos(a)) + (blLon*sin(a)) <br>
 x = lon*cos(-A) - lat*sin(-A) - blLon = lon * cos(A)+ lat*sin(A) -
 (blLat*sin(a)) - (blLon * cos(a) <br>
 
 And then:
 
 j = w * (x / mapWitdhDegrees) <br>
 i = h - ( h * (y / mapHeightDegrees))<br></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Miquel Martin</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#CoordinateTools(int, int, double[], double[], double[])">CoordinateTools</a></strong>(int&nbsp;height,
               int&nbsp;width,
               double[]&nbsp;topRight,
               double[]&nbsp;bottomRight,
               double[]&nbsp;bottomLeft)</code>
<div class="block">Initialize the mapping between the Siafu simulation grid and the actual
 coordinates.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#coordinatesToLocal(double, double)">coordinatesToLocal</a></strong>(double&nbsp;lat,
                  double&nbsp;lon)</code>
<div class="block">Returns the map row and column corresponding to the given coordinates.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#coordinatesToPrettyCoordinates(double[])">coordinatesToPrettyCoordinates</a></strong>(double[]&nbsp;coord)</code>
<div class="block">Convert a coordinate pair into a string of the form "N 49 34.233 E 23
 22.322".</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#localToCoordinates(int, int)">localToCoordinates</a></strong>(int&nbsp;i,
                  int&nbsp;j)</code>
<div class="block">Returns the latitude and longitude corresponding to the map internal
 row i and column j.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#localToCoordinates(de.nec.nle.siafu.model.Position)">localToCoordinates</a></strong>(<a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a>&nbsp;pos)</code>
<div class="block">Returns the latitude and longitude corresponding to the map internal
 row and column given by the Position parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#localToPrettyCoordinates(int, int)">localToPrettyCoordinates</a></strong>(int&nbsp;i,
                        int&nbsp;j)</code>
<div class="block">Convert a Siafu map position (a row column pair) into a string of the
 form "N 49 34.233 E 23 22.322", according to the map calibration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../de/nec/nle/siafu/model/CoordinateTools.html#localToPrettyCoordinates(de.nec.nle.siafu.model.Position)">localToPrettyCoordinates</a></strong>(<a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a>&nbsp;pos)</code>
<div class="block">Convert a Siafu map position (a row column pair) into a string of the
 form "N 49 34.233 E 23 22.322", according to the map calibration.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CoordinateTools(int, int, double[], double[], double[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CoordinateTools</h4>
<pre>public&nbsp;CoordinateTools(int&nbsp;height,
               int&nbsp;width,
               double[]&nbsp;topRight,
               double[]&nbsp;bottomRight,
               double[]&nbsp;bottomLeft)</pre>
<div class="block">Initialize the mapping between the Siafu simulation grid and the actual
 coordinates.
 
 The simulation map corresponds to a rectangular area in the real world.
 There's no limitations in the aspect ratio of the retangle, and it does
 not need to be north oriented.
 
 The inizialization calculates how the amount of latitude and longitude
 degrees associated to each grid point. Using the method, the
 transformation between grid points and coordinates costs only two
 multiplications and two additions.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>height</code> - the number of rows in the Siafu map</dd><dd><code>width</code> - the number of columns in the Siafu map</dd><dd><code>topRight</code> - an double array conaining the latitude and longitude of
            the top right corner of the map.</dd><dd><code>bottomRight</code> - an double array conaining the latitude and longitude
            of the bottom right corner of the map.</dd><dd><code>bottomLeft</code> - an double array conaining the latitude and longitude
            of the bottom left corner of the map.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="localToPrettyCoordinates(de.nec.nle.siafu.model.Position)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localToPrettyCoordinates</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;localToPrettyCoordinates(<a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a>&nbsp;pos)</pre>
<div class="block">Convert a Siafu map position (a row column pair) into a string of the
 form "N 49 34.233 E 23 22.322", according to the map calibration.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the position</dd>
<dt><span class="strong">Returns:</span></dt><dd>the prettified string</dd></dl>
</li>
</ul>
<a name="localToPrettyCoordinates(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localToPrettyCoordinates</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;localToPrettyCoordinates(int&nbsp;i,
                              int&nbsp;j)</pre>
<div class="block">Convert a Siafu map position (a row column pair) into a string of the
 form "N 49 34.233 E 23 22.322", according to the map calibration.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - the row of the position</dd><dd><code>j</code> - the column of the position</dd>
<dt><span class="strong">Returns:</span></dt><dd>the prettified string</dd></dl>
</li>
</ul>
<a name="coordinatesToPrettyCoordinates(double[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>coordinatesToPrettyCoordinates</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;coordinatesToPrettyCoordinates(double[]&nbsp;coord)</pre>
<div class="block">Convert a coordinate pair into a string of the form "N 49 34.233 E 23
 22.322".</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>coord</code> - the coordinates to transofrm</dd>
<dt><span class="strong">Returns:</span></dt><dd>the prettified string</dd></dl>
</li>
</ul>
<a name="localToCoordinates(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localToCoordinates</h4>
<pre>public&nbsp;double[]&nbsp;localToCoordinates(int&nbsp;i,
                          int&nbsp;j)</pre>
<div class="block">Returns the latitude and longitude corresponding to the map internal
 row i and column j.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - the row</dd><dd><code>j</code> - the column</dd>
<dt><span class="strong">Returns:</span></dt><dd>a double[2] with the latitude in position 0, and the
         longitudein position 1.</dd></dl>
</li>
</ul>
<a name="localToCoordinates(de.nec.nle.siafu.model.Position)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localToCoordinates</h4>
<pre>public&nbsp;double[]&nbsp;localToCoordinates(<a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a>&nbsp;pos)</pre>
<div class="block">Returns the latitude and longitude corresponding to the map internal
 row and column given by the Position parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the position to convert</dd>
<dt><span class="strong">Returns:</span></dt><dd>a double[2] with the latitude in position 0, and the
         longitudein position 1.</dd></dl>
</li>
</ul>
<a name="coordinatesToLocal(double, double)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>coordinatesToLocal</h4>
<pre>public&nbsp;<a href="../../../../../de/nec/nle/siafu/model/Position.html" title="class in de.nec.nle.siafu.model">Position</a>&nbsp;coordinatesToLocal(double&nbsp;lat,
                          double&nbsp;lon)</pre>
<div class="block">Returns the map row and column corresponding to the given coordinates.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lat</code> - the latitude</dd><dd><code>lon</code> - the longitude</dd>
<dt><span class="strong">Returns:</span></dt><dd>a Position with the Siafu position matching the given
         coordinates</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CoordinateTools.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../de/nec/nle/siafu/model/BinaryOverlay.html" title="class in de.nec.nle.siafu.model"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../de/nec/nle/siafu/model/DirectorySimulationData.html" title="class in de.nec.nle.siafu.model"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?de/nec/nle/siafu/model/CoordinateTools.html" target="_top">Frames</a></li>
<li><a href="CoordinateTools.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2013. All Rights Reserved.</small></p>
</body>
</html>
